/*
 * API_debounce.c
 *
 *  Created on: Nov 26, 2023
 *      Author: Royer Sanabria
 */

#include "API_debounce.h"
#include "API_delay.h"
#define debounce_delay 40
debounceState_t status_button=buttonUp;
control_t control_MEF;
delay_t Retardo;

void debounceFSM_update(){
	control_MEF=0;
	while(0==control_MEF){
	switch (status_button){
		case buttonUp:
			if(RESET==HAL_GPIO_ReadPin(GPIOC, GPIO_PIN_13)){

				if(delayRead(&Retardo)){
					if(RESET==HAL_GPIO_ReadPin(GPIOC, GPIO_PIN_13)){
						HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_5);
										HAL_Delay(100);

					}
				}



			}
			else{
				HAL_GPIO_WritePin(GPIOA, GPIO_PIN_5, SET);
			}
		break;
	}
	}
}

void debounceFSM_init(){
	status_button=buttonUp;
	delayInit(&Retardo);
	delayWrite(&Retardo, 40);
}
void buttonPressed();
void buttonReleased();
